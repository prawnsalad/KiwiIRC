<script type="text/javascript">
    (function () {
        var network = kiwi.components.Network();
        var control = kiwi.components.ControlInput();
        var $area = $("#kiwi .controlbox textarea");
 
        var $icon = $('<strong style="cursor:pointer; cursor: hand">B</strong>');
        var bold = false;
 
        $.fn.toggleClick=function(){
            console.log('toggle click');
            var functions=arguments, iteration=0
            return this.click(function(){
                functions[iteration].apply(this,arguments)
                iteration= (iteration+1) %functions.length
            })
        }
 
        $icon.toggleClick(function(){
            console.log('bold');
            $area.css('font-weight', 'bold');
            $icon.parent().addClass('active');
            bold = true;
        },function(){
            console.log('unbold');
            $area.css('font-weight', '');
            $icon.parent().removeClass('active');
            bold = false;
        });

        $area.keydown(function(e){
            var code = e.keyCode || e.which;

            if(code == 13 && bold){
                $area.val('\x02'+$area.val());
            }
        });
 
        control.addPluginIcon($icon);
    })();
</script>